<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <title>Iqra 2 - Fathah & Baris</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Scheherazade+New:wght@400;700&display=swap');
        
        body { 
            font-family: 'Amiri', 'Scheherazade New', 'Traditional Arabic', serif; 
            background: linear-gradient(135deg, #f0f8ff 0%, #e6f3ff 100%);
            margin: 0; 
            padding: 10px;
            min-height: 100vh;
            direction: rtl;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header { 
            background: linear-gradient(135deg, #1e40af 0%, #1e3a8a 100%);
            color: white; 
            padding: 20px; 
            text-align: center;
        }
        
        .header h1 {
            margin: 0;
            font-size: 24px;
            font-weight: bold;
        }
        
        .content { 
            padding: 20px;
        }
        
        .lesson-section {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .lesson-title {
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            color: #1e40af;
            padding: 15px;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 20px;
            text-align: center;
            border: 2px solid #93c5fd;
        }
        
        .harakat-display {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .harakat-card {
            background: white;
            border: 3px solid #3b82f6;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .harakat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3);
        }
        
        .harakat-name {
            color: #1e40af;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .harakat-symbol {
            font-size: 72px;
            color: #3b82f6;
            margin: 15px 0;
            font-weight: bold;
        }
        
        .harakat-sound {
            color: #1e40af;
            font-size: 16px;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .practice-section {
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
            border: 2px solid #22c55e;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .practice-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .practice-item {
            background: white;
            border: 2px solid #22c55e;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .practice-item:hover {
            background: #f0fdf4;
            transform: scale(1.05);
        }
        
        .practice-letter {
            font-size: 36px;
            color: #15803d;
            font-weight: bold;
            margin: 5px 0;
        }
        
        .practice-sound {
            font-size: 14px;
            color: #166534;
            font-weight: bold;
        }
        
        .tajwid-rules {
            background: linear-gradient(135deg, #fef7cd 0%, #fef3c7 100%);
            border: 2px solid #f59e0b;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .tajwid-title {
            color: #92400e;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .rule-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border-left: 4px solid #f59e0b;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .btn {
            background: linear-gradient(135deg, #1e40af 0%, #1e3a8a 100%);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s ease;
            min-width: 120px;
        }
        
        .btn:hover {
            background: linear-gradient(135deg, #1e3a8a 0%, #1e293b 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(30, 64, 175, 0.3);
        }
        
        .navigation {
            background: #f1f5f9;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-top: 2px solid #e2e8f0;
        }
        
        .audio-player {
            background: #f0f9ff;
            border: 2px solid #0891b2;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
        }
        
        @media (max-width: 600px) {
            .harakat-display {
                grid-template-columns: 1fr;
            }
            
            .practice-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .harakat-symbol {
                font-size: 48px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>ÿ•ŸÇÿ±ÿ£ Ÿ¢ - ÿßŸÑŸÅÿ™ÿ≠ÿ© ŸàÿßŸÑÿ≠ÿ±ŸÉÿßÿ™</h1>
            <div class="subtitle">Iqra 2 - Fathah and Harakat System</div>
        </div>
        
        <!-- Content -->
        <div class="content">
            <!-- Introduction -->
            <div class="lesson-section">
                <div class="lesson-title">
                    ÿ™ÿπŸÑŸÖ ÿßŸÑÿ≠ÿ±ŸÉÿßÿ™ - Learning Harakat (Diacritical Marks)
                </div>
                
                <!-- Harakat Display -->
                <div class="harakat-display">
                    <div class="harakat-card" onclick="playHarakatAudio('fathah')">
                        <div class="harakat-name">ÿßŸÑŸÅÿ™ÿ≠ÿ© - Fathah</div>
                        <div class="harakat-symbol">ÿ®Ÿé</div>
                        <div class="harakat-sound">BA (bunyi "a")</div>
                        <div style="font-size: 12px; color: #666;">Klik untuk dengar</div>
                    </div>
                    
                    <div class="harakat-card" onclick="playHarakatAudio('kasrah')">
                        <div class="harakat-name">ÿßŸÑŸÉÿ≥ÿ±ÿ© - Kasrah</div>
                        <div class="harakat-symbol">ÿ®Ÿê</div>
                        <div class="harakat-sound">BI (bunyi "i")</div>
                        <div style="font-size: 12px; color: #666;">Klik untuk dengar</div>
                    </div>
                    
                    <div class="harakat-card" onclick="playHarakatAudio('dhammah')">
                        <div class="harakat-name">ÿßŸÑÿ∂ŸÖÿ© - Dhammah</div>
                        <div class="harakat-symbol">ÿ®Ÿè</div>
                        <div class="harakat-sound">BU (bunyi "u")</div>
                        <div style="font-size: 12px; color: #666;">Klik untuk dengar</div>
                    </div>
                </div>
                
                <!-- Audio Player -->
                <div class="audio-player" id="audioPlayer">
                    <div style="color: #0891b2; font-weight: bold; margin-bottom: 10px;">
                        üîä Sebutan Harakat
                    </div>
                    <audio id="harakatAudio" controls style="width: 100%;">
                        <source src="../../audio/iqra/iqra2-fathah.mp3" type="audio/mpeg">
                        Browser anda tidak menyokong audio player.
                    </audio>
                </div>
            </div>
            
            <!-- Practice Section -->
            <div class="practice-section">
                <div class="lesson-title" style="background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%); color: #15803d; border-color: #22c55e;">
                    üéØ Latihan Sebutan - Pronunciation Practice
                </div>
                
                <div class="practice-grid">
                    <div class="practice-item" onclick="playLetterSound('ba-fathah')">
                        <div class="practice-letter">ÿ®Ÿé</div>
                        <div class="practice-sound">BA</div>
                    </div>
                    <div class="practice-item" onclick="playLetterSound('ba-kasrah')">
                        <div class="practice-letter">ÿ®Ÿê</div>
                        <div class="practice-sound">BI</div>
                    </div>
                    <div class="practice-item" onclick="playLetterSound('ba-dhammah')">
                        <div class="practice-letter">ÿ®Ÿè</div>
                        <div class="practice-sound">BU</div>
                    </div>
                    <div class="practice-item" onclick="playLetterSound('ta-fathah')">
                        <div class="practice-letter">ÿ™Ÿé</div>
                        <div class="practice-sound">TA</div>
                    </div>
                    <div class="practice-item" onclick="playLetterSound('ta-kasrah')">
                        <div class="practice-letter">ÿ™Ÿê</div>
                        <div class="practice-sound">TI</div>
                    </div>
                    <div class="practice-item" onclick="playLetterSound('ta-dhammah')">
                        <div class="practice-letter">ÿ™Ÿè</div>
                        <div class="practice-sound">TU</div>
                    </div>
                    <div class="practice-item" onclick="playLetterSound('tsa-fathah')">
                        <div class="practice-letter">ÿ´Ÿé</div>
                        <div class="practice-sound">TSA</div>
                    </div>
                    <div class="practice-item" onclick="playLetterSound('tsa-kasrah')">
                        <div class="practice-letter">ÿ´Ÿê</div>
                        <div class="practice-sound">TSI</div>
                    </div>
                    <div class="practice-item" onclick="playLetterSound('tsa-dhammah')">
                        <div class="practice-letter">ÿ´Ÿè</div>
                        <div class="practice-sound">TSU</div>
                    </div>
                </div>
                
                <div class="controls">
                    <button class="btn" onclick="playAllPractice()">
                        üîÑ Latih Semua
                    </button>
                    <button class="btn" onclick="randomPractice()">
                        üé≤ Latihan Rawak
                    </button>
                    <button class="btn" onclick="testMode()">
                        üìù Mod Ujian
                    </button>
                </div>
            </div>
            
            <!-- Tajwid Rules for Harakat -->
            <div class="tajwid-rules">
                <div class="tajwid-title">
                    üìñ Peraturan Tajwid - Harakat Rules
                </div>
                
                <div class="rule-item">
                    <div style="color: #92400e; font-weight: bold; font-size: 16px; margin-bottom: 8px;">
                        1. Fathah (ÿßŸÑŸÅÿ™ÿ≠ÿ©) - Baris Atas
                    </div>
                    <div style="color: #666; font-size: 14px; margin-bottom: 10px;">
                        Tanda kecil di atas huruf yang menghasilkan bunyi "a" pendek
                    </div>
                    <div style="font-size: 32px; color: #f59e0b; text-align: center; margin: 10px 0;">
                        ÿ®Ÿé ÿ™Ÿé ÿ´Ÿé ÿ¨Ÿé ÿ≠Ÿé
                    </div>
                    <div style="color: #666; font-size: 14px; text-align: center;">
                        BA - TA - TSA - JA - HA
                    </div>
                </div>
                
                <div class="rule-item">
                    <div style="color: #92400e; font-weight: bold; font-size: 16px; margin-bottom: 8px;">
                        2. Kasrah (ÿßŸÑŸÉÿ≥ÿ±ÿ©) - Baris Bawah
                    </div>
                    <div style="color: #666; font-size: 14px; margin-bottom: 10px;">
                        Tanda kecil di bawah huruf yang menghasilkan bunyi "i" pendek
                    </div>
                    <div style="font-size: 32px; color: #f59e0b; text-align: center; margin: 10px 0;">
                        ÿ®Ÿê ÿ™Ÿê ÿ´Ÿê ÿ¨Ÿê ÿ≠Ÿê
                    </div>
                    <div style="color: #666; font-size: 14px; text-align: center;">
                        BI - TI - TSI - JI - HI
                    </div>
                </div>
                
                <div class="rule-item">
                    <div style="color: #92400e; font-weight: bold; font-size: 16px; margin-bottom: 8px;">
                        3. Dhammah (ÿßŸÑÿ∂ŸÖÿ©) - Baris Hadapan
                    </div>
                    <div style="color: #666; font-size: 14px; margin-bottom: 10px;">
                        Tanda kecil seperti waw kecil di atas huruf yang menghasilkan bunyi "u" pendek
                    </div>
                    <div style="font-size: 32px; color: #f59e0b; text-align: center; margin: 10px 0;">
                        ÿ®Ÿè ÿ™Ÿè ÿ´Ÿè ÿ¨Ÿè ÿ≠Ÿè
                    </div>
                    <div style="color: #666; font-size: 14px; text-align: center;">
                        BU - TU - TSU - JU - HU
                    </div>
                </div>
                
                <div class="rule-item">
                    <div style="color: #92400e; font-weight: bold; font-size: 16px; margin-bottom: 8px;">
                        4. Cara Pembelajaran Yang Betul
                    </div>
                    <div style="color: #666; font-size: 14px;">
                        ‚Ä¢ Pastikan makhraj (tempat keluar) huruf yang betul<br>
                        ‚Ä¢ Jangan campurkan bunyi harakat dengan huruf lain<br>
                        ‚Ä¢ Latih secara berulang-ulang dengan sabar<br>
                        ‚Ä¢ Minta guru sahkan sebutan sebelum meneruskan
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Navigation -->
        <div class="navigation">
            <button class="btn" onclick="previousPage()">
                ‚Üê Kembali ke Iqra 1
            </button>
            
            <div style="background: #1e40af; color: white; padding: 8px 16px; border-radius: 20px; font-weight: bold;">
                Iqra 2 - Harakat
            </div>
            
            <button class="btn" onclick="nextPage()">
                Iqra 3 - Sukukun ‚Üí
            </button>
        </div>
    </div>
    
    <script>
        // Iqra 2 Learning System
        class Iqra2System {
            constructor() {
                this.currentHarakat = 'fathah';
                this.practiceMode = 'normal';
                this.testScore = 0;
                this.testTotal = 0;
                
                this.audioFiles = {
                    'fathah': 'iqra2-fathah.mp3',
                    'kasrah': 'iqra2-kasrah.mp3',
                    'dhammah': 'iqra2-dhammah.mp3',
                    'ba-fathah': 'iqra2-ba-fathah.mp3',
                    'ba-kasrah': 'iqra2-ba-kasrah.mp3',
                    'ba-dhammah': 'iqra2-ba-dhammah.mp3',
                    'ta-fathah': 'iqra2-ta-fathah.mp3',
                    'ta-kasrah': 'iqra2-ta-kasrah.mp3',
                    'ta-dhammah': 'iqra2-ta-dhammah.mp3',
                    'tsa-fathah': 'iqra2-tsa-fathah.mp3',
                    'tsa-kasrah': 'iqra2-tsa-kasrah.mp3',
                    'tsa-dhammah': 'iqra2-tsa-dhammah.mp3'
                };
                
                this.initializeSystem();
            }
            
            initializeSystem() {
                // Add keyboard shortcuts
                document.addEventListener('keydown', (e) => {
                    if (e.key === '1') this.playHarakatAudio('fathah');
                    if (e.key === '2') this.playHarakatAudio('kasrah');
                    if (e.key === '3') this.playHarakatAudio('dhammah');
                    if (e.key === 'r') this.randomPractice();
                    if (e.key === 't') this.testMode();
                });
                
                console.log('Iqra 2 Learning System initialized');
            }
            
            playHarakatAudio(harakat) {
                this.currentHarakat = harakat;
                const audio = document.getElementById('harakatAudio');
                audio.src = `../../audio/iqra/${this.audioFiles[harakat]}`;
                
                audio.play().catch(e => {
                    console.log('Audio playback failed:', e);
                    this.showVisualFeedback(harakat);
                });
                
                // Highlight the selected harakat card
                this.highlightHarakatCard(harakat);
            }
            
            highlightHarakatCard(harakat) {
                // Remove previous highlights
                document.querySelectorAll('.harakat-card').forEach(card => {
                    card.style.borderColor = '#3b82f6';
                    card.style.backgroundColor = 'white';
                });
                
                // Highlight current card (simplified selection)
                const cards = document.querySelectorAll('.harakat-card');
                let cardIndex = harakat === 'fathah' ? 0 : harakat === 'kasrah' ? 1 : 2;
                
                if (cards[cardIndex]) {
                    cards[cardIndex].style.borderColor = '#ef4444';
                    cards[cardIndex].style.backgroundColor = '#fef2f2';
                }
            }
            
            playLetterSound(letterKey) {
                const audio = document.getElementById('harakatAudio');
                audio.src = `../../audio/iqra/${this.audioFiles[letterKey]}`;
                
                audio.play().catch(e => {
                    console.log('Audio playback failed:', e);
                    this.showVisualFeedback(letterKey);
                });
                
                // Visual feedback for practice item
                const practiceItems = document.querySelectorAll('.practice-item');
                practiceItems.forEach(item => {
                    if (item.onclick.toString().includes(letterKey)) {
                        item.style.backgroundColor = '#dcfce7';
                        item.style.transform = 'scale(1.1)';
                        setTimeout(() => {
                            item.style.backgroundColor = 'white';
                            item.style.transform = 'scale(1)';
                        }, 500);
                    }
                });
            }
            
            showVisualFeedback(key) {
                // Create visual pulse effect when audio fails
                const body = document.body;
                body.style.animation = 'pulse 0.3s ease-in-out';
                setTimeout(() => body.style.animation = '', 300);
            }
            
            playAllPractice() {
                const practiceOrder = [
                    'ba-fathah', 'ba-kasrah', 'ba-dhammah',
                    'ta-fathah', 'ta-kasrah', 'ta-dhammah',
                    'tsa-fathah', 'tsa-kasrah', 'tsa-dhammah'
                ];
                
                let index = 0;
                const playNext = () => {
                    if (index < practiceOrder.length) {
                        this.playLetterSound(practiceOrder[index]);
                        index++;
                        setTimeout(playNext, 1500); // Wait 1.5 seconds between sounds
                    }
                };
                
                playNext();
            }
            
            randomPractice() {
                const practiceKeys = Object.keys(this.audioFiles).filter(key => 
                    key.includes('-fathah') || key.includes('-kasrah') || key.includes('-dhammah')
                );
                
                const randomKey = practiceKeys[Math.floor(Math.random() * practiceKeys.length)];
                this.playLetterSound(randomKey);
            }
            
            testMode() {
                if (this.practiceMode !== 'test') {
                    this.practiceMode = 'test';
                    this.testScore = 0;
                    this.testTotal = 0;
                    
                    alert('Mod Ujian dimulakan! Dengar bunyi dan klik huruf yang betul.');
                    this.startTest();
                } else {
                    this.practiceMode = 'normal';
                    alert(`Ujian selesai! Skor anda: ${this.testScore}/${this.testTotal}`);
                }
            }
            
            startTest() {
                // Simple test implementation
                this.randomPractice();
                this.testTotal++;
                
                // In a real implementation, you would track user clicks and scoring
                if (this.testTotal < 10) {
                    setTimeout(() => this.startTest(), 3000);
                }
            }
            
            previousPage() {
                // Navigate back to Iqra 1
                window.parent.postMessage({action: 'navigate', module: 'iqra-1'}, '*');
            }
            
            nextPage() {
                // Navigate to Iqra 3
                window.parent.postMessage({action: 'navigate', module: 'iqra-3'}, '*');
            }
        }
        
        // Global functions for HTML onclick events
        let iqra2System;
        
        function playHarakatAudio(harakat) {
            iqra2System.playHarakatAudio(harakat);
        }
        
        function playLetterSound(letterKey) {
            iqra2System.playLetterSound(letterKey);
        }
        
        function playAllPractice() {
            iqra2System.playAllPractice();
        }
        
        function randomPractice() {
            iqra2System.randomPractice();
        }
        
        function testMode() {
            iqra2System.testMode();
        }
        
        function previousPage() {
            iqra2System.previousPage();
        }
        
        function nextPage() {
            iqra2System.nextPage();
        }
        
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', () => {
            iqra2System = new Iqra2System();
        });
    </script>
</body>
</html>
