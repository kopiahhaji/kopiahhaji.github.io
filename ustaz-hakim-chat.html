<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ustaz Radhi AI - Digital Dakwah Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Sora', sans-serif; }
        .glass-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .chat-bubble-user {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }
        .chat-bubble-ustaz {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.3);
        }
        .typing-indicator {
            animation: pulse 1.5s ease-in-out infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 0.4; }
            50% { opacity: 1; }
        }
    </style>
</head>
<body class="bg-[#000711] text-gray-200 min-h-screen">

    <!-- Ustaz Radhi AI Chat Interface -->
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        
        <!-- Header -->
        <div class="glass-card rounded-xl p-6 mb-6">
            <div class="flex items-center space-x-4">
                <div class="w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center">
                    <span class="text-white text-2xl">ğŸ§ </span>
                </div>
                <div>
                    <h1 class="text-2xl font-bold text-green-300">Ustaz Radhi AI</h1>
                    <p class="text-gray-400">Pembantu Ilmu Agama - Mazhab Syafie</p>
                    <div class="flex items-center space-x-2 mt-2">
                        <div class="w-3 h-3 bg-green-400 rounded-full"></div>
                        <span class="text-sm text-green-400">Online - Sedia Membantu</span>
                    </div>
                </div>
            </div>
            
            <!-- Quick Guidelines -->
            <div class="mt-4 p-4 bg-green-500/10 rounded-lg border border-green-500/20">
                <h3 class="text-green-300 font-semibold mb-2">ğŸŒŸ Panduan Bertanya:</h3>
                <div class="grid md:grid-cols-2 gap-2 text-sm text-gray-300">
                    <div>âœ… Soalan tentang Al-Quran & Hadith</div>
                    <div>âœ… Fiqh & Ibadah (Mazhab Syafie)</div>
                    <div>âœ… Akhlaq & Adab Islam</div>
                    <div>âœ… Sejarah Islam & Sirah</div>
                </div>
            </div>
        </div>

        <!-- Chat Container -->
        <div class="glass-card rounded-xl overflow-hidden">
            
            <!-- Chat Messages Area -->
            <div id="chatMessages" class="h-96 overflow-y-auto p-6 space-y-4">
                
                <!-- Welcome Message -->
                <div class="flex items-start space-x-3">
                    <div class="w-8 h-8 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center flex-shrink-0">
                        <span class="text-white text-sm">ğŸ§ </span>
                    </div>
                    <div class="chat-bubble-ustaz rounded-lg p-4 max-w-md">
                        <div class="text-sm text-green-300 font-semibold mb-1">Ustaz Radhi</div>
                        <div class="text-gray-200">
                            Assalamualaikum warahmatullahi wabarakatuh. Selamat datang ke Digital Dakwah Platform. Saya Ustaz Radhi, membantu anda untuk menjawab soalan-soalan berkaitan agama?
                        </div>
                    </div>
                </div>

                <!-- Sample Questions -->
                <div class="bg-blue-500/10 rounded-lg p-4 border border-blue-500/20">
                    <h4 class="text-blue-300 font-semibold mb-2">ğŸ’¡ Contoh Soalan:</h4>
                    <div class="space-y-2">
                        <button class="sample-question w-full text-left p-2 rounded bg-white/5 hover:bg-white/10 transition text-sm text-gray-300">
                            "Bagaimana cara solat yang betul menurut mazhab Syafie?"
                        </button>
                        <button class="sample-question w-full text-left p-2 rounded bg-white/5 hover:bg-white/10 transition text-sm text-gray-300">
                            "Apakah hukum zakat fitrah dan berapa kadarnya?"
                        </button>
                        <button class="sample-question w-full text-left p-2 rounded bg-white/5 hover:bg-white/10 transition text-sm text-gray-300">
                            "Boleh terangkan tentang adab ketika membaca Al-Quran?"
                        </button>
                    </div>
                </div>

            </div>

            <!-- Typing Indicator (Hidden by default) -->
            <div id="typingIndicator" class="hidden px-6 py-2">
                <div class="flex items-center space-x-3">
                    <div class="w-8 h-8 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center">
                        <span class="text-white text-sm">ğŸ§ </span>
                    </div>
                    <div class="typing-indicator text-gray-400 text-sm">
                        Ustaz Radhi sedang menaip...
                    </div>
                </div>
            </div>

            <!-- Chat Input Area -->
            <div class="border-t border-white/10 p-6">
                <div class="flex space-x-4">
                    <input 
                        type="text" 
                        id="messageInput" 
                        placeholder="Be respectful, Jazakallahu khairan." 
                        class="flex-1 bg-white/10 border border-white/20 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-400 focus:border-transparent"
                        maxlength="500"
                    >
                    <button 
                        id="sendButton" 
                        class="bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white px-6 py-3 rounded-lg font-semibold transition-all duration-300 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed"
                    >
                        Hantar
                    </button>
                </div>
                <div class="mt-2 text-xs text-gray-500">
                    Tekan Enter untuk hantar. Maksimum 500 aksara.
                </div>
            </div>
        </div>

        <!-- Disclaimer -->
        <div class="mt-6 text-center text-xs text-gray-500 bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-4">
            <p class="mb-2">âš ï¸ <strong>Penafian:</strong> Ustaz Radhi AI adalah pembantu pembelajaran sahaja.</p>
            <p>Untuk keputusan penting atau isu kompleks, sila rujuk ustaz berkelayakan di masjid tempatan. Wallahu a'lam bissawab.</p>
        </div>
    </div>

    <script>
        // Chat functionality
        class UstazRadhiChat {
            constructor() {
                this.messageInput = document.getElementById('messageInput');
                this.sendButton = document.getElementById('sendButton');
                this.chatMessages = document.getElementById('chatMessages');
                this.typingIndicator = document.getElementById('typingIndicator');
                
                this.initializeEventListeners();
                this.initializeSampleQuestions();
            }

            initializeEventListeners() {
                // Send button click
                this.sendButton.addEventListener('click', () => this.sendMessage());
                
                // Enter key press
                this.messageInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        this.sendMessage();
                    }
                });

                // Input validation
                this.messageInput.addEventListener('input', () => {
                    this.validateInput();
                });
            }

            initializeSampleQuestions() {
                const sampleButtons = document.querySelectorAll('.sample-question');
                sampleButtons.forEach(button => {
                    button.addEventListener('click', () => {
                        const question = button.textContent.replace(/"/g, '');
                        this.messageInput.value = question;
                        this.messageInput.focus();
                    });
                });
            }

            validateInput() {
                const message = this.messageInput.value.trim();
                const isValid = message.length > 0 && message.length <= 500;
                
                this.sendButton.disabled = !isValid;
                
                // Character count (optional)
                const remaining = 500 - message.length;
                if (remaining < 50) {
                    this.messageInput.style.borderColor = remaining < 0 ? '#ef4444' : '#f59e0b';
                } else {
                    this.messageInput.style.borderColor = '';
                }
            }

            async sendMessage() {
                const message = this.messageInput.value.trim();
                if (!message) return;

                // Add user message to chat
                this.addMessage(message, 'user');
                
                // Clear input and disable send button
                this.messageInput.value = '';
                this.sendButton.disabled = true;
                
                // Show typing indicator
                this.showTypingIndicator();

                try {
                    // Simulate API call to Ustaz Radhi AI
                    const response = await this.callUstazRadhiAPI(message);
                    
                    // Hide typing indicator
                    this.hideTypingIndicator();
                    
                    // Add Ustaz response
                    this.addMessage(response, 'ustaz');
                    
                } catch (error) {
                    this.hideTypingIndicator();
                    this.addMessage('Maaf, ada masalah teknikal. Sila cuba lagi sebentar lagi.', 'ustaz');
                }
            }

            addMessage(message, sender) {
                const messageDiv = document.createElement('div');
                messageDiv.className = 'flex items-start space-x-3';
                
                if (sender === 'user') {
                    messageDiv.innerHTML = `
                        <div class="w-8 h-8 bg-gray-600 rounded-full flex items-center justify-center flex-shrink-0">
                            <span class="text-white text-sm">ğŸ‘¤</span>
                        </div>
                        <div class="chat-bubble-user rounded-lg p-4 max-w-md ml-auto">
                            <div class="text-white">${this.escapeHtml(message)}</div>
                        </div>
                    `;
                } else {
                    messageDiv.innerHTML = `
                        <div class="w-8 h-8 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center flex-shrink-0">
                            <span class="text-white text-sm">ğŸ§ </span>
                        </div>
                        <div class="chat-bubble-ustaz rounded-lg p-4 max-w-2xl">
                            <div class="text-sm text-green-300 font-semibold mb-1">Ustaz Radhi</div>
                            <div class="text-gray-200">${this.formatUstazResponse(message)}</div>
                        </div>
                    `;
                }
                
                this.chatMessages.appendChild(messageDiv);
                this.chatMessages.scrollTop = this.chatMessages.scrollHeight;
            }

            showTypingIndicator() {
                this.typingIndicator.classList.remove('hidden');
                this.chatMessages.scrollTop = this.chatMessages.scrollHeight;
            }

            hideTypingIndicator() {
                this.typingIndicator.classList.add('hidden');
            }

            formatUstazResponse(message) {
                // Format the response with Islamic styling
                return message
                    .replace(/\*\*(.*?)\*\*/g, '<strong class="text-green-300">$1</strong>')
                    .replace(/ğŸ“–|ğŸ•Œ|ğŸ’¡|âš ï¸|ğŸŒŸ|âœ…/g, '<span class="text-lg">$&</span>')
                    .replace(/\n/g, '<br>');
            }

            escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }

            async callUstazRadhiAPI(message) {
                // Simulate API delay
                await new Promise(resolve => setTimeout(resolve, 1500 + Math.random() * 1000));
                
                // Content filtering
                if (this.isInappropriate(message)) {
                    return "Maaf, soalan ini di luar skop ilmu agama yang saya boleh bantu. Sila tanya soalan berkaitan Islam sahaja. Jazakallahu khairan.";
                }

                // Simple pattern matching for demo
                const responses = this.getResponsePatterns();
                
                for (const pattern of responses) {
                    if (pattern.keywords.some(keyword => 
                        message.toLowerCase().includes(keyword.toLowerCase())
                    )) {
                        return pattern.response;
                    }
                }

                // Default response
                return `Terima kasih atas soalan "${message}". 

Untuk memberikan jawapan yang tepat, saya perlukan maklumat yang lebih khusus. Boleh saudara terangkan soalan dengan lebih terperinci?

Wallahu a'lam bissawab.`;
            }

            isInappropriate(message) {
                const prohibited = [
                    '18+', 'dewasa', 'lucah', 'seks', 'politik', 'filem', 'lagu',
                    'bodoh', 'bangang', 'racist', 'kaum'
                ];
                
                return prohibited.some(word => 
                    message.toLowerCase().includes(word.toLowerCase())
                );
            }

            getResponsePatterns() {
                return [
                    {
                        keywords: ['solat', 'sembahyang', 'prayer'],
                        response: `**Solat dalam Mazhab Syafie**

Terima kasih atas soalan tentang solat, saudara.

ğŸ•Œ **Rukun Solat:**
1. Takbiratul ihram
2. Berdiri (bagi yang mampu)  
3. Membaca Al-Fatihah
4. Rukuk dengan tuma'ninah
5. I'tidal dengan tuma'ninah
6. Sujud dua kali dengan tuma'ninah
7. Duduk antara dua sujud
8. Duduk akhir
9. Membaca tahiyyat akhir
10. Membaca selawat ke atas Nabi ï·º
11. Salam pertama

ğŸ“– **Dalil:** Rasulullah ï·º bersabda: "ØµÙÙ„ÙÙ‘ÙˆØ§ ÙƒÙÙ…ÙØ§ Ø±ÙØ£ÙÙŠÙ’ØªÙÙ…ÙÙˆÙ†ÙÙŠ Ø£ÙØµÙÙ„ÙÙ‘ÙŠ" - "Solatlah kamu sebagaimana kamu melihat aku solat."

Wallahu a'lam bissawab.`
                    },
                    {
                        keywords: ['zakat', 'fitrah'],
                        response: `**Zakat dalam Islam**

Zakat adalah rukun Islam yang ketiga dan sangat penting.

ğŸ’° **Jenis-jenis Zakat:**
- Zakat Fitrah (wajib pada bulan Ramadan)
- Zakat Harta (emas, perak, wang simpanan, perniagaan)
- Zakat Pertanian

ğŸŒ¾ **Zakat Fitrah:** Kadarnya adalah 2.7kg beras atau nilai wang yang setara (biasanya RM7-10 di Malaysia).

ğŸ“– **Dalil:** "Ø®ÙØ°Ù’ Ù…ÙÙ†Ù’ Ø£ÙÙ…Ù’ÙˆÙØ§Ù„ÙÙ‡ÙÙ…Ù’ ØµÙØ¯ÙÙ‚ÙØ©Ù‹ ØªÙØ·ÙÙ‡ÙÙ‘Ø±ÙÙ‡ÙÙ…Ù’ ÙˆÙØªÙØ²ÙÙƒÙÙ‘ÙŠÙ‡ÙÙ… Ø¨ÙÙ‡ÙØ§"
"Ambillah zakat dari harta mereka untuk membersihkan dan mensucikan mereka."

Untuk kadar yang tepat di Sabah, sila rujuk Majlis Ugama Islam Sabah (MUIS) dengan melayari laman web rasmi mereka https://appszakat.sabah.gov.my/zakatfitrah.php

Wallahu a'lam bissawab.`
                    },
                    {
                        keywords: ['quran', 'al-quran', 'quraan', 'membaca quran'],
                        response: `**Adab Membaca Al-Quran**

Subhanallah, soalan yang mulia tentang kitab Allah.

ğŸ“– **Adab Sebelum Membaca:**
- Berwuduk dan berpakaian sopan
- Menghadap kiblat (sunat)
- Membaca ta'awwuz: "Ø£ÙØ¹ÙÙˆØ°Ù Ø¨ÙØ§Ù„Ù„ÙÙ‘Ù‡Ù Ù…ÙÙ†Ù Ø§Ù„Ø´ÙÙ‘ÙŠÙ’Ø·ÙØ§Ù†Ù Ø§Ù„Ø±ÙÙ‘Ø¬ÙÙŠÙ…Ù"
- Membaca basmalah: "Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø§Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ°Ù†Ù Ø§Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù"

ğŸµ **Cara Membaca:**
- Dengan tartil (perlahan dan jelas)
- Merenungkan makna ayat
- Dengan khusyuk dan tadabbur

ğŸ’¡ **Manfaat:** Allah SWT berfirman: "ÙˆÙØ±ÙØªÙÙ‘Ù„Ù Ø§Ù„Ù’Ù‚ÙØ±Ù’Ø¢Ù†Ù ØªÙØ±Ù’ØªÙÙŠÙ„Ù‹Ø§" - "Dan bacalah Al-Quran dengan tartil."

Semoga Allah mudahkan saudara dalam menghafaz dan memahami Al-Quran.

Wallahu a'lam bissawab.`
                    }
                ];
            }
        }

        // Initialize chat when page loads
        document.addEventListener('DOMContentLoaded', () => {
            new UstazRadhiChat();
        });
    </script>

</body>
</html>
